var controllers=angular.module("controllers",["sapayolControllers"]),sapayolControllers=angular.module("sapayolControllers",[]);sapayolControllers.controller("lookAndFitCtrl",["$scope","$http","$q",function(e,o,r){e.selectedColumn=0,e.jacket={leather_type:"lamb heavy",leather_color:"black",lining_color:"black",hardware_color:"silver",size:44}}]),sapayolControllers.controller("GlobalCtrl",["$rootScope","$document","Session","$scope","notifyUser",function(e,o,r,n,s){e.flushSession=function(){r["delete"]("flush").then(function(){s.of("Session flushed")})},e.getSession=function(){r.getCurrent().then(function(e){console.log(e)})}}]),sapayolControllers.controller("checkoutCtrl",["$scope","$http","$q","$document","notifyUser",function(e,o,r,n,s){init=function(){null!==sapayol.user&&(e.user=sapayol.user,e.userInfoSubmitted=!0,n.scrollToElement(angular.element("#shipping-info"),80,500)),null!==sapayol.address&&(e.address=sapayol.address,e.shippingInfoSubmitted=!0,n.scrollToElement(angular.element("#payment-info"),80,500))},e.submitUserInfo=function(o){e.userInfoForm.$valid?addUserInfoToOrder(e.user,o).then(function(o){e.userInfoSubmitted=!0,n.scrollToElement(angular.element("#shipping-info"),80,500)}):e.showUserErorrs=!0},e.submitShippingInfo=function(o){e.shippingInfoForm.$valid?addShippingInfoToOrder(e.address,o).then(function(o){console.log(o),e.shippingInfoSubmitted=!0,n.scrollToElement(angular.element("#payment-info"),80,500)}):e.showShippingErorrs=!0},addUserInfoToOrder=function(e,n){var t=r.defer();return o.post("/orders/"+n,{_method:"PATCH",name:e.name,email:e.email}).success(function(e,o){t.resolve(e)}).error(function(e,o){s.ofApiErrors(e,o)}),t.promise},addShippingInfoToOrder=function(e,n){var t=r.defer();return o.post("/orders/"+n,{_method:"PATCH",address1:e.address1,address2:e.address2,city:e.city,postcode:e.postcode,province:e.province,country:e.country}).success(function(e,o){t.resolve(e)}).error(function(e,o){s.ofApiErrors(e,o)}),t.promise},Stripe.setPublishableKey("pk_test_G2k7gKlVNK1rpGMDeF5FDIhO"),e.stripeResponseHandler=function(o,r){r.error?s.ofErrorMessage(400==o?r.error:r.error.message):(e.card=r.card,e.stripe_token=r.id,e.paymentInfoSubmitted=!0,console.log(r))},init()}]);var factories=angular.module("factories",["sessionFactory"]),sessionFactory=angular.module("sessionFactory",[]);sessionFactory.factory("Session",["$http","$q",function(e,o){return session={},session.getCurrent=function(){var r=o.defer();return e.get("/session").success(function(e,o){r.resolve(e)}).error(function(e,o){return e}),r.promise},session.getValueOf=function(r){var n=o.defer();return e.get("/session/"+r).success(function(e,o){n.resolve(e)}).error(function(e,o){return e}),n.promise},session.store=function(r){var n={};angular.forEach(r,function(e,o){n[o]=e});var s=o.defer();return e.post("/session",n).success(function(e,o){s.resolve(e)}).error(function(e,o){return e}),s.promise},session["delete"]=function(r){var n=o.defer();return e["delete"]("/session/"+r,{}).success(function(e,o){n.resolve(e)}).error(function(e,o){return e}),n.promise},session}]),function(){"use strict";angular.module("sapayolApp",["controllers","services","factories","duScroll","cgNotify","angularPayments","angular-loading-bar","ngMask"]).run(["$timeout",function(e){e(function(){$(document).ready(function(){$(".home-carousel").slick({dots:!0,mobileFirst:!0})})},500)}]).directive("scrollToTop",function(){return{restrict:"A",link:function(e,o){o.on("click",function(){$("body").animate({scrollTop:0},"slow")})}}});$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html,body").animate({scrollTop:e.offset().top},1e3),!1}})}),plyr.setup({controls:["play","fullscreen"]})}();var services=angular.module("services",["notificationServices"]),notificationServices=angular.module("notificationServices",[]);notificationServices.factory("notifyUser",["notify",function(e){return notifyOfValidationError=function(o){angular.forEach(o,function(o,r){var n=new RegExp(r,"i");return o=o[0].replace(n,"<strong>$&</strong>"),template="<span>",template+=o+"<br>",template+="</span>",e({messageTemplate:template,classes:"alert"})})},{ofApiErrors:function(o,r){return"string"==typeof o?e({message:o,classes:alert}):422===r?notifyOfValidationError(o):e(500===r?{message:o.error,classes:"alert"}:{message:o.message,classes:"alert"})},ofErrorMessage:function(o){return e({message:o,classes:"alert"})},ofWarningMessage:function(o){return e({message:o,classes:"warning"})},ofSuccessMessage:function(o){return e({message:o,classes:"success"})},of:function(o){return e(o)}}}]);
//# sourceMappingURL=../maps/main.js.map