{"version":3,"sources":["main.js","controllers/_index.js","controllers/checkoutController.js","controllers/globalController.js","controllers/lookController.js","controllers/measurementController.js","directives/_index.js","directives/globalDirectives.js","factories/_index.js","factories/globalFactory.js","factories/sessionFactory.js","factories/userFactory.js","services/_index.js","services/authenticationService.js","services/notifcationService.js"],"names":["scaleVideoContainer","height","$","window","unitHeight","parseInt","css","initBannerVideoSize","element","each","this","data","width","scaleBannerVideoSize","videoWidth","videoHeight","windowWidth","windowHeight","videoAspectRatio","windowAspectRatio","top","margin-left","margin-top","addClass","angular","module","run","$timeout","document","ready","slick","dots","arrows","mobileFirst","focusOnSelect","plyr","setup","controls","foundation","FastClick","attach","body","click","location","pathname","replace","hostname","target","hash","length","slice","animate","scrollTop","offset","on","controllers","checkoutController","controller","$scope","$http","$q","$document","notifyUser","Session","card","sapayol","session","stripe_token","init","address","addressSubmitted","addressDisabled","saved_card_info","paymentInfoSubmitted","paymentInfoDisabled","scrollToElement","user","name","changePaymentInfo","store","changeAddress","submitAddress","order_id","addressForm","$valid","addAddressToOrder","then","response","showAddressErorrs","deferred","defer","post","_method","address1","address2","city","postcode","province","country","success","status","resolve","error","ofApiErrors","promise","Stripe","setPublishableKey","stripeResponseHandler","ofErrorMessage","message","id","globalController","$rootScope","flushSession","of","getSession","getCurrent","console","log","lookController","Auth","jacket","oldInput","model","leather_type","leather_color","lining_color","hardware_color","updateSessionCache","submitAuthRequest","request","logout","userInfoForm","register","showUserErorrs","focus","proceedToOrder","createOrderForm","submit","input","email","password","login","deleteCurrentUser","resetPassword","reset","measurementController","measurementFraction","submitMeasurement","step","displayMinMaxError","units","measurement","feet","inches","finalForm","measurementForm","$error","min","max","change","result","Math","round","decimal","getFractionFromDecimal","rightDecimalPart","toFixed","highestCommonFactor","a","b","directives","globalDirectives","directive","restrict","link","scope","$elm","roundDownToQuarter","number","decimalToFraction","userValueToFraction","userValue","attrs","tabsCtrl","fraction","textContent","innerHTML","factories","globalFactory","factory","$broadcast","sessionFactory","get","getValueOf","key","paramsToStore","params","forEach","value","userFactory","form","schema","type","properties","title","required","minLength","description","setCurrent","userArray","getSchema","getForm","index","currentPage","orderBy","reverse","instructorIndex","create","update","patch","search","queryType","query","createDsoAccount","services","authenticationService","auth","remember","notificationService","notify","notifyOfValidationError","val","searchTextRegExp","RegExp","template","messageTemplate","classes","alert","ofWarningMessage","ofSuccessMessage"],"mappings":"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","file":"main.js","sourcesContent":["(function() {\n  'use strict';\n\n  var sapayolApp = angular.module('sapayolApp', [\n    'controllers',\n    'services',\n    'directives',\n    'factories',\n    'duScroll',\n    'cgNotify',\n    'angularPayments',\n    'angular-loading-bar',\n    'ngMask'\n  ])\n  .run(['$timeout', function($timeout) {\n    $timeout(function() {\n\t\t\t$(document).ready(function(){\n\t\t\t  $('.jacket-carousel').slick({\n          dots: true,\n\t\t\t  \tarrows: true,\n\t\t\t  \tmobileFirst: true,\n          focusOnSelect: false\n\t\t\t  });\n\n        plyr.setup({\n          controls: [\"play\", \"fullscreen\"]\n        });\n        $(document).foundation();\n        FastClick.attach(document.body);\n      });\n    }, 500);\n  }]);\n\n\n  // Smooth scrolling on anchor tags\n  $(function() {\n    $('a[href*=#]:not([href=#])').click(function() {\n      if (location.pathname.replace(/^\\//,'') == this.pathname.replace(/^\\//,'') && location.hostname == this.hostname) {\n        var target = $(this.hash);\n        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');\n        if (target.length) {\n          $('html,body').animate({\n            scrollTop: target.offset().top\n          }, 1000);\n          return false;\n        }\n      }\n    });\n  });\n\n\n\n/** Full screen hero video code **/\n/********************************************************************/\n\n$( document ).ready(function() {\n\n  // Resive video\n  scaleVideoContainer();\n\n  initBannerVideoSize('.hero-video-container .poster img');\n  initBannerVideoSize('.hero-video-container .filter');\n  initBannerVideoSize('.hero-video-container video');\n\n  $(window).on('resize', function() {\n    scaleVideoContainer();\n    scaleBannerVideoSize('.hero-video-container .poster img');\n    scaleBannerVideoSize('.hero-video-container .filter');\n    scaleBannerVideoSize('.hero-video-container video');\n  });\n\n});\n\n  /** Reusable Functions **/\n  /********************************************************************/\n\n  function scaleVideoContainer() {\n    var height = $(window).height();\n    var unitHeight = parseInt(height) + 'px';\n    $('.hero-video-container').css('height',unitHeight);\n  }\n\n  function initBannerVideoSize(element){\n    $(element).each(function(){\n      $(this).data('height', $(this).height());\n      $(this).data('width', $(this).width());\n    });\n\n    scaleBannerVideoSize(element);\n  }\n\n  function scaleBannerVideoSize(element){\n    var windowWidth = $(window).width(),\n        windowHeight = $(window).height(),\n        videoWidth,\n        videoHeight;\n\n    $(element).each(function(){\n      var videoAspectRatio = $(this).data('height')/$(this).data('width'),\n      windowAspectRatio = windowHeight/windowWidth;\n      if (videoAspectRatio > windowAspectRatio) {\n        videoWidth = windowWidth;\n        videoHeight = videoWidth * videoAspectRatio;\n        $(this).css({'top' : -(videoHeight - windowHeight) / 2 + 'px', 'margin-left' : 0});\n      } else {\n        videoHeight = windowHeight;\n        videoWidth = videoHeight / videoAspectRatio;\n        $(this).css({'margin-top' : 0, 'margin-left' : -(videoWidth - windowWidth) / 2 + 'px'});\n      }\n      $(this).width(videoWidth).height(videoHeight);\n      $('.hero-video-container video').addClass('fadeIn animated');\n    });\n  }\n\n})();\n\n","var controllers = angular.module('controllers', [\n\t'checkoutController',\n\t'globalController',\n\t'lookController',\n\t'measurementController'\n]);\n","var checkoutController = angular.module('checkoutController', []);\n\ncheckoutController.controller('checkoutCtrl', ['$scope', '$http', '$q', '$document', 'notifyUser', 'Session',  function($scope, $http, $q, $document, notifyUser, Session) {\n\n\t$scope.card         = typeof(sapayol.session['card'])         !== 'undefined' ? sapayol.session['card'] : {};\n\t$scope.stripe_token = typeof(sapayol.session['stripe_token']) !== 'undefined' ? sapayol.session['stripe_token'] : {};\n\n\tinit = function() {\n\t\t$scope.address = {};\n\t\tif (sapayol.address !== null) {\n\t\t\t$scope.address          = sapayol.address;\n\t\t\t$scope.addressSubmitted = true;\n\t\t\t$scope.addressDisabled  = true;\n\t\t\tsaved_card_info = (\n\t\t\t\t   typeof($scope.stripe_token) !== 'undefined'\n\t\t\t\t&& typeof($scope.card)         !== 'undefined'\n\t\t\t\t&& typeof($scope.card.id)      !== 'undefined') ? true : false;\n\t\t\tif (saved_card_info) {\n\t\t\t\t$scope.paymentInfoSubmitted = true;\n\t\t\t\t$scope.paymentInfoDisabled  = true;\n\t\t\t\t$document.scrollToElement(angular.element('#order-summary'), 80, 500);\n\t\t\t} else {\n\t\t\t\t$document.scrollToElement(angular.element('#address'), 80, 500);\n\t\t\t}\n\t\t};\n\t\tif (sapayol.user !== null) {\n\t\t\t$scope.address.name = sapayol.user.name;\n\t\t};\n\t}\n\n\t$scope.changePaymentInfo = function() {\n\t\t$document.scrollToElement(angular.element('#payment-info'), 80, 500);\n\t\t$scope.paymentInfoDisabled = false;\n\t\t$scope.card = null;\n\t\tSession.store({card: $scope.card});\n\t}\n\n\t$scope.changeAddress = function() {\n\t\t$document.scrollToElement(angular.element('#address'), 80, 500);\n\t\t$scope.addressDisabled = false;\n\t}\n\n\t$scope.submitAddress = function(order_id) {\n\t  if ($scope.addressForm.$valid) {\n\t  \tif ($scope.paymentInfoSubmitted) {\n\t\t\t\t$document.scrollToElement(angular.element('#order-summary'), 80, 500);\n\t  \t} else {\n\t  \t\taddAddressToOrder($scope.address, order_id).then(function(response){\n\t\t\t\t\t$scope.addressSubmitted = true;\n\t\t\t\t\t$scope.addressDisabled = true;\n\t\t\t\t\t$document.scrollToElement(angular.element('#payment-info'), 80, 500);\n\t  \t\t});\n\t  \t}\n\t  } else {\n\t  \t$scope.showAddressErorrs = true;\n\t  }\n\t};\n\n\n\taddAddressToOrder = function(address, order_id) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post('/orders/' + order_id, {\n\t\t\t_method: 'PATCH',\n\t\t\tname:     address.name,\n\t\t\taddress1: address.address1,\n\t\t\taddress2: address.address2,\n\t\t\tcity:     address.city,\n\t\t\tpostcode: address.postcode,\n\t\t\tprovince: address.province,\n\t\t\tcountry:  address.country,\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n\t}\n\n\tStripe.setPublishableKey('pk_test_G2k7gKlVNK1rpGMDeF5FDIhO');\n\n\t$scope.stripeResponseHandler = function(status, response) {\n\t\tif(response.error) {\n\t  \tif (status == 400) {\n\t\t  \tnotifyUser.ofErrorMessage(response.error);\n\t  \t} else {\n\t\t  \tnotifyUser.ofErrorMessage(response.error.message);\n\t  \t};\n\t  } else {\n\t\t\t$scope.card                 = response.card;\n\t\t\t$scope.stripe_token         = response.id;\n\t\t\t$scope.paymentInfoSubmitted = true;\n\t\t\t$scope.paymentInfoDisabled  = true;\n\n\t\t\tSession.store({\n\t\t\t\tcard:         $scope.card,\n\t\t\t\tstripe_token: $scope.stripe_token\n\t\t\t});\n\t\t}\n\t};\n\n\tinit();\n\n}]);\n","var globalController = angular.module('globalController', []);\n\nglobalController.controller('GlobalCtrl', ['$rootScope', '$document', 'Session', '$scope', 'notifyUser', function($rootScope, $document, Session, $scope, notifyUser) {\n\t\t$rootScope.flushSession = function() {\n\t\t\tSession.delete('flush').then(function(){\n\t\t\t\tnotifyUser.of('Session flushed');\n\t\t\t});\n\t\t};\n\n\t\t$rootScope.getSession = function() {\n\t\t\tSession.getCurrent().then(function(session){\n\t\t\t\tconsole.log(session);\n\t\t\t});\n\t\t};\n}]);\n\n","var lookController = angular.module('lookController', []);\n\nlookController.controller('lookAndFitCtrl', ['$scope', '$http', '$q', 'Session', '$timeout', 'Auth', 'notifyUser', function($scope, $http, $q, Session, $timeout, Auth, notifyUser) {\n\n\t// The users session info from the server\n\t$scope.jacket = sapayol.jacket;\n\toldInput = typeof(sapayol.session[$scope.jacket.model]) !== 'undefined' ? sapayol.session[$scope.jacket.model] : {};\n\n\t$scope.init = function(leather_type, leather_color, lining_color, hardware_color) {\n\t\t$scope.jacket.leather_type   = typeof(oldInput.leather_type)   !== 'undefined' ? oldInput.leather_type   : leather_type;\n\t\t$scope.jacket.leather_color  = typeof(oldInput.leather_color)  !== 'undefined' ? oldInput.leather_color  : leather_color;\n\t\t$scope.jacket.lining_color   = typeof(oldInput.lining_color)   !== 'undefined' ? oldInput.lining_color   : lining_color;\n\t\t$scope.jacket.hardware_color = typeof(oldInput.hardware_color) !== 'undefined' ? oldInput.hardware_color : hardware_color;\n\t}\n\n\t// Update the session on the server to match the changes that the user makes\n\t$scope.updateSessionCache = function() {\n\t\tvar jacket = {};\n\t\tjacket[sapayol.jacket.model] = $scope.jacket;\n\t\tSession.store(jacket);\n\t}\n\n  $scope.submitAuthRequest = function(request) {\n  \tif (request === 'logout') return logout($scope.user);\n  \tif ($scope.userInfoForm.$valid) {\n  \t\tregister($scope.user);\n\t  } else {\n  \t\t$scope.showUserErorrs = true;\n  \t\tfocus('emailField');\n\t  }\n  }\n\n  $scope.proceedToOrder = function() {\n \t\t$timeout(function() {\n\t \t\tcreateOrderForm.submit();\n \t\t}, 100);\n  }\n\n  register = function(input) {\n\t\t\t Auth.register(input.email, input.password)\n\t\t\t \t.then(function(user) {\n\t\t\t \t\t$scope.user = user;\n\t\t\t\t$scope.proceedToOrder();\n  \t\t});\n  };\n\n  login = function(input) {\n  \tAuth.login(input.email, input.password)\n  \t\t.then(function(user) {\n\t\t\t \t\t$scope.user = user;\n\t\t\t\t$scope.proceedToOrder();\n  \t\t});\n  }\n\n  logout = function () {\n\t\tAuth.logout()\n  \t\t.then(function(data) {\n\t\t\t\tdeleteCurrentUser();\n  \t\t\tnotifyUser.of('You were logged out');\n  \t\t});\n  };\n\n  $scope.resetPassword = function() {\n    if ($scope.userInfoForm.email.$valid) {\n      Auth.reset($scope.user.email)\n        .then(function(data) {\n          notifyUser.of(data);\n          $scope.reset = false;\n        });\n    } else {\n      $scope.showUserErorrs = true;\n    }\n  }\n\n\n}]);\n","var measurementController = angular.module('measurementController', []);\n\nmeasurementController.controller('measurementCtrl', ['$scope', '$timeout', function($scope, $timeout) {\n\n\n\t$scope.measurementFraction = null;\n\n\t$scope.submitMeasurement = function(step) {\n\t\t$scope.displayMinMaxError = false;\n\t\tif ($scope.step == 'height' && $scope.units === 'in') {\n\t\t\t$scope.measurement = (parseInt($scope.feet * 12)) + parseInt($scope.inches);\n\t\t\t$timeout(function(){\n\t\t\t\tfinalForm.submit();\n\t\t\t}, 100);\n\t\t} else if ($scope.measurementForm[step].$error.min || $scope.measurementForm[step].$error.max ) {\n\t\t\t$timeout(function(){\n\t\t\t\t$scope.displayMinMaxError = true;\n\t\t\t}, 100);\n\t\t} else if ($scope.measurementForm.$valid) {\n\t\t\tfinalForm.submit();\n\t\t}\n\t}\n\n\t$scope.init = function(step, units, measurement) {\n\t\t$scope.step = step;\n\t\t$scope.units = units;\n\t\t$scope.change(measurement);\n\t\tif ($scope.step == 'height' && $scope.units === 'in') {\n\t\t\t$scope.feet = parseInt(measurement/12);\n\t\t\t$scope.inches = parseInt(measurement%12);\n\t\t} else {\n\t\t\t$scope.measurement = measurement;\n\t\t}\n\t}\n\n\t$scope.change = function(measurement) {\n\t\t$scope.displayMinMaxError = false;\n\t \tif (typeof(measurement) !== 'undefined' ) {\n\t\t\tresult = Math.round( measurement * 1e2 ) / 1e2;\n\t\t\t$scope.measurement = result;\n\t\t\tdecimal = Math.round(result * 8) / 8;\n\t\t\tif (getFractionFromDecimal(decimal) !== '') {\n\t\t\t\t$scope.measurementFraction = getFractionFromDecimal(decimal);\n\t\t\t};\n\t\t} else {\n\t\t\t$scope.measurementFraction = null;\n\t\t}\n\t}\n\n\tgetFractionFromDecimal = function(decimal) {\n\t\tvar rightDecimalPart = (decimal % 1).toFixed(2);\n\t\tif (rightDecimalPart === '0.13') {\n\t\t\tresult = '1/8';\n\t\t} else if (rightDecimalPart === '0.25') {\n\t\t\tresult = '1/4';\n\t\t} else if (rightDecimalPart === '0.38') {\n\t\t\tresult = '3/8';\n\t\t} else if (rightDecimalPart === '0.50') {\n\t\t\tresult = '1/2';\n\t\t} else if (rightDecimalPart === '0.63') {\n\t\t\tresult = '5/8';\n\t\t} else if (rightDecimalPart === '0.75') {\n\t\t\tresult = '3/4';\n\t\t} else if (rightDecimalPart === '0.88') {\n\t\t\tresult = '7/8';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn parseInt(decimal) + \"  \" + result;\n\t}\n\n\thighestCommonFactor = function(a,b) {\n    if (b==0) return a;\n    return highestCommonFactor(b,a%b);\n\t}\n\n\n}]);\n\n\n","var directives = angular.module('directives', [\n\t'globalDirectives'\n]);\n","var globalDirectives = angular.module('globalDirectives', []);\n\nglobalDirectives.directive('scrollToTop', function() {\n  return {\n    restrict: 'A',\n    link: function(scope, $elm) {\n      $elm.on('click', function() {\n        $(\"body\").animate({scrollTop: 0}, \"slow\");\n      });\n    }\n  }\n});\n\n\n\nglobalDirectives.directive('decimalToFraction', function() {\n\n\troundDownToQuarter = function(number) {\n\t\tresult = Math.round( number * 1e2 ) / 1e2;\n\t\treturn Math.round(result * 8) / 8;\n\t}\n\n\tdecimalToFraction = function(decimal) {\n\t\tvar rightDecimalPart = (decimal % 1).toFixed(2);\n\t\tif (rightDecimalPart === '0.13') {\n\t\t\treturn '1/8';\n\t\t} else if (rightDecimalPart === '0.25') {\n\t\t\treturn '1/4';\n\t\t} else if (rightDecimalPart === '0.38') {\n\t\t\treturn '3/8';\n\t\t} else if (rightDecimalPart === '0.50') {\n\t\t\treturn '1/2';\n\t\t} else if (rightDecimalPart === '0.63') {\n\t\t\treturn '5/8';\n\t\t} else if (rightDecimalPart === '0.75') {\n\t\t\treturn '3/4';\n\t\t} else if (rightDecimalPart === '0.88') {\n\t\t\treturn '7/8';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserValueToFraction = function(userValue) {\n\t\tnumber  = (userValue % 1).toFixed(2);\n\t\tdecimal = roundDownToQuarter(number);\n\t\treturn decimalToFraction(decimal);\n\t}\n\n  return {\n    restrict: 'A',\n    link: function(scope, $elm, attrs, tabsCtrl) {\n\t\t\tuserValue = attrs.decimalToFraction;\n\t\t\tfraction  = userValueToFraction(userValue);\n\t\t\tresult = fraction ? parseInt(userValue) + \" \" + fraction : parseInt(userValue);\n\t\t\t$elm[0].textContent = result;\n\t\t\tif (fraction) {\n\t\t\t\t$elm[0].innerHTML = parseInt(userValue) + \" <small>\" + fraction + \"</small>\";\n\t\t\t} else {\n\t\t\t\t$elm[0].innerHTML = parseInt(userValue);\n\t\t\t};\n\t\t\tresult = fraction ? parseInt(userValue) + \" \" + fraction : parseInt(userValue);\n    }\n  }\n});","var factories = angular.module('factories', [\n\t'globalFactory',\n\t'sessionFactory',\n\t'userFactory'\n]);\n","var globalFactory = angular.module('globalFactory', []);\n\nglobalFactory.factory('focus', ['$rootScope', '$timeout', function($rootScope, $timeout) {\n  return function(name) {\n    $timeout(function (){\n      $rootScope.$broadcast('focusOn', name);\n    });\n  }\n}]);\n","var sessionFactory = angular.module('sessionFactory', []);\n\nsessionFactory.factory('Session', ['$http', '$q', function($http, $q) {\n\n\tsession = {};\n\n\tsession.getCurrent = function() {\n\t\tvar deferred = $q.defer();\n\t\t$http.get('/session')\n\t\t\t.success(function(response, status) {\n\t\t\t\tdeferred.resolve(response);\n\t\t  }).error(function(response, status) {\n \t\t\t\treturn response;\n\t\t  });\n\t\treturn deferred.promise;\n\t}\n\n\tsession.getValueOf = function(key) {\n\t\tvar deferred = $q.defer();\n\t\t$http.get('/session/' + key)\n\t\t\t.success(function(response, status) {\n\t\t\t\tdeferred.resolve(response);\n\t\t  }).error(function(response, status) {\n \t\t\t\treturn response;\n\t\t  });\n\t\treturn deferred.promise;\n\t}\n\n\tsession.store = function(paramsToStore) {\n\t\tvar params = {};\n\t\tangular.forEach(paramsToStore, function(value, key) {\n\t\t\tparams[key] = value;\n\t\t});\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/session\", params).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\treturn response;\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tsession.delete = function(key) {\n\t\tvar deferred = $q.defer();\n\t\t$http.delete(\"/session/\" + key, {\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\treturn response;\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\treturn session;\n\n}]);\n","var userFactory = angular.module('userFactory', []);\n\nuserFactory.factory('User', ['$http', '$q', 'notifyUser', function($http, $q, notifyUser) {\n\n\n\tvar user   = {};\n\tvar form   = [\"*\"];\n\tvar schema = {\n\t\ttype: \"object\",\n\t\tproperties: {\n\t\t\ttitle: {\n\t\t\t\ttype: \"string\",\n\t\t\t\trequired: true,\n\t\t\t\tminLength: 3,\n\t\t\t\ttitle: \"Title\",\n\t\t\t\tdescription: \"User title\"\n\t\t\t}\n\t\t}\n\t};\n\n\tuser.setCurrent = function(userArray) {\n\t\tuser = userArray;\n\t}\n\n\tuser.getCurrent = function() {\n\t\treturn user;\n\t}\n\n\tuser.getSchema = function() {\n\t\treturn schema;\n\t}\n\n\tuser.getForm = function() {\n\t\treturn form;\n\t}\n\n\t//===========================================================================//\n\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  CRUD \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t //\n\t//===========================================================================//\n\n\tuser.index = function(currentPage, orderBy, reverse) {\n\t\tvar deferred = $q.defer();\n\t\t$http.get('/users?page=' + currentPage + orderBy + reverse)\n\t\t\t.success(function(response, status) {\n\t\t\t\tdeferred.resolve(response);\n\t\t  }).error(function(response, status) {\n \t\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t  });\n\t\treturn deferred.promise;\n\t}\n\n\tuser.instructorIndex = function() {\n\t\tvar deferred = $q.defer();\n\t\t$http.get('/users?role=instructor')\n\t\t\t.success(function(response, status) {\n\t\t\t\tdeferred.resolve(response);\n\t\t  }).error(function(response, status) {\n \t\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t  });\n\t\treturn deferred.promise;\n\t}\n\n\tuser.create = function(model) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/users\", {\n\t\t\ttitle: model.title\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tuser.update = function(model) {\n\t\tvar deferred = $q.defer();\n\t\t$http.patch(\"/users/\" + model.id, {\n\t\t\ttitle: model.title\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tuser.delete = function(user) {\n\t\tvar deferred = $q.defer();\n\t\t$http.delete(\"/users/\" + user.id, {\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tuser.search = function(queryType, query) {\n\t\tvar deferred = $q.defer();\n\t\t$http.get('/users?query_type=' + queryType + '&q=' + query)\n\t\t\t.success(function(response, status) {\n\t\t\t\tdeferred.resolve(response);\n\t\t  }).error(function(response, status) {\n \t\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t  });\n\t\treturn deferred.promise;\n\t}\n\n\tuser.createDsoAccount = function(id) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/users/\" + id + \"/create_dso_account\").success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n\t\t\tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\treturn user;\n\n}]);\n","var services = angular.module('services', [\n\t'authenticationService',\n\t'notificationService',\n]);","var authenticationService = angular.module('authenticationService', []);\n\n\nauthenticationService.factory('Auth', ['$http', '$q', 'notifyUser', function($http, $q, notifyUser) {\n\n\tvar auth   = {};\n\n  //===========================================================================//\n\t//\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  AUTH \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t //\n\t//===========================================================================//\n\n  auth.register = function(email, password) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/auth/register\", {\n\t\t\temail:    email,\n\t\t\tpassword: password,\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n    \tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tauth.login = function(email, password, remember) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/auth/login\", {\n\t\t\temail:    email,\n\t\t\tpassword: password,\n\t\t\tremember: remember\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n    \tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n  auth.reset = function(email) {\n\t\tvar deferred = $q.defer();\n\t\t$http.post(\"/password/email\", {\n\t\t\temail: email,\n\t\t}).success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n    \tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\tauth.logout = function() {\n\t\tvar deferred = $q.defer();\n\t\t$http.get(\"/auth/logout\")\n\t\t.success(function(response, status) {\n\t\t\tdeferred.resolve(response);\n\t\t}).error(function(response, status) {\n    \tnotifyUser.ofApiErrors(response, status);\n\t\t});\n\t\treturn deferred.promise;\n  };\n\n\treturn auth;\n\n}]);\n","var notificationService = angular.module('notificationService', []);\n\nnotificationService.factory('notifyUser', ['notify', function(notify) {\n\n\tnotifyOfValidationError = function(data) {\n\t\tangular.forEach(data, function(error, val) {\n\t\t\tvar searchTextRegExp = new RegExp(val , \"i\");\n\t\t\terror            = error[0].replace(searchTextRegExp , '<strong>$&</strong>'),\n\t\t\ttemplate         = \"<span>\",\n\t\t\ttemplate         += error + '<br>',\n\t\t\ttemplate         += \"</span>\";\n\t  \treturn notify({ messageTemplate: template, classes: 'alert' });\n\t  });\n\t}\n\n\treturn {\n\t\tofApiErrors: function(response, status) {\n\t\t\tif (typeof(response) == 'string') {\n\t\t\t\treturn notify({ message: response, classes: alert });\n\t\t\t};\n\t\t\tif (status === 422) {\n\t\t\t\treturn notifyOfValidationError(response);\n\t\t\t} else if (status === 500) {\n\t\t\t\treturn notify({ message: response.error, classes: 'alert' });\n\t\t\t} else {\n\t\t\t\treturn notify({ message: response.message, classes: 'alert' });\n\t\t\t}\n\t\t},\n\t\tofErrorMessage: function(error) {\n\t\t\treturn notify({ message: error, classes: 'alert' });\n\t\t},\n\t  ofWarningMessage: function(data) {\n\t\t\treturn notify({ message: data, classes: 'warning' });\n\t  },\n\t\tofSuccessMessage: function(data) {\n\t\t\treturn notify({ message: data, classes: 'success' });\n\t  },\n\t\tof: function(data) {\n\t  \treturn notify(data);\n\t\t}\n\t}\n\n}]);\n"],"sourceRoot":"/source/"}